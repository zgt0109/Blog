<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <title>Blog Admin</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= yield :css %>
  <%= csrf_meta_tags %>
</head>
<body class="#{params[:action]}" id="#{params[:controller].gsub('/','_')}">
  <div class="ui segment inverted red">
    <div class="ui grid page">
      <div class="ui menu inverted red">
        <%= link_to '后台首页', admin_root_path, class: 'item' %>
        <%= link_to '管理员资料', '#', class: 'item' %>
        <div class="right menu">
          <div class="ui dropdown item">
            <%= current_admin.email %>
            <i class="dropdown icon"></i>
            <div class="menu">
              <%= link_to '退出', destroy_admin_session_path, class: 'item',
                               method: 'delete' %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="ui grid page">
    <div class="column">
      <% flash.each do |name,msg| %>
        <div class="ui message #{name}">
          <p><%= msg %></p>
        </div>
      <% end %>

      <h1>文章搜索列表</h1>

      <div class="ui two column middle aligned grid">
          <div class="column">

          </div>
          <div class="right floated column five wide">
            <%= form_tag '/admin/articles/search', :method => 'get', class: 'ui form' do %>
            <div class="ui input">
              <%= text_field_tag :search, params[:search] %>
              <%= submit_tag "Search", :name => nil, class: 'ui button green' %>
            </div>
            <% end %>
          </div>
      </div>
      <table class="ui table">
        <thead>
          <tr>
            <th>文章ID</th>
            <th>文章标题</th>
            <th>文章内容</th>
            <th>文章类型</th>
            <th colspan="3">操作</th>
          </tr>
        </thead>

        <tbody>
          <% @articles.each do |article| %>
            <tr>
              <td><%= article.id %></td>
              <td><%= article.title %></td>
              <td><%= article.content %></td>
              <td><%= link_to article.article_type.name, admin_article_type_path(article.article_type_id) %></td>
              <td><%= link_to t("action.show"), admin_article_path(article) %></td>
              <td><%= link_to t("action.edit"), edit_admin_article_path(article) %></td>
              <td><%= link_to t("action.delete"), admin_article_path(article), method: :delete, data: { confirm: 'Are you sure?' } %></td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <br>
      <%= link_to t("action.new"), new_admin_article_path, class: 'ui button green' %>

    </div>
  </div>

  <script type="text/javascript">
  	$(document).ready(
  		function(){
  		  $('.ui.dropdown').dropdown();
  		}
  	);
  </script>

  <%= yield :js %>

</body>
</html>
